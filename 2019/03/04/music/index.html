<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="基于vue+spring-boot+mybatis的音乐网站开发"><meta name="keywords" content="vue,spring boot"><meta name="author" content="Yin-Hongwei"><meta name="copyright" content="Yin-Hongwei"><title>基于vue+spring-boot+mybatis的音乐网站开发 | Hongwei Blog</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script></head><body><header id="header"><nav id="navbar"><span class="nav-left"><div class="tou-img"><img src="/img/tou.jpg"></div><a id="site-name" href="/">Hongwei Blog</a></span><i class="fa fa-bars toggle-menu nav-right" aria-hidden="true"></i><span class="nav-right menus"><a class="site-page" href="/about">关于</a><a class="site-page" href="/archives">存档</a><a class="site-page" href="/tags">标签</a></span></nav></header><article id="content-outer"><section id="content-inner"><article class="article-entry" id="post"><h1>基于vue+spring-boot+mybatis的音乐网站开发</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>我这里只对我这个项目实现的思路做一下描述，我觉得了解了具体实现的来龙去脉，上手自己做就容易得多了，要知道数据是怎么从数据库一步步跑到前端页面的，当知道了整个的流程再去处理中间的细节，具体实现的细节等有时间了就补充，接下来我们就开始吧。</p>
<p>这是我项目的<a href="https://github.com/Yin-Hongwei/music-website" target="_blank" rel="noopener">地址</a>，可以点开先看看最后的预览图。</p>
<a id="more"></a>
<p><br></p>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>我这个项目是基于spring boot + MyBatis + vue 开发的，首先就一些概念做一些描述。</p>
<h4 id="1-Spring-Boot"><a href="#1-Spring-Boot" class="headerlink" title="1.Spring Boot"></a>1.Spring Boot</h4><p>简单来说 Spring Boot 就是整合了Maven、MyBatis等等的一个框架，尽可能减少你的配置文件，能让你很快的开发一个 Spring 应用。</p>
<h4 id="2-数据持久化"><a href="#2-数据持久化" class="headerlink" title="2.数据持久化"></a>2.数据持久化</h4><p>数据持久化就是将内存中的数据模型转换为存储模型，以及将存储模型转换为内存中的数据模型的统称，数据模型可以是任何数据结构或对象模型，存储模型可以是关系模型、XML、二进制流等。持久化指把对象数据永久保存在数据库中，只要磁盘不损坏，在断电或者其他情况下，重新开启系统仍然可以读取到这些数据。<a href="http://www.ruanyifeng.com/blog/2019/02/orm-tutorial.html" target="_blank" rel="noopener">ORM</a> 就是数据持久层的一种子实现，而它的具体实现有很多，MyBatis就是其中之一。</p>
<h4 id="3-MyBatis"><a href="#3-MyBatis" class="headerlink" title="3.MyBatis"></a>3.MyBatis</h4><p>MyBatis 是一个基于 Java 的持久层框架。</p>
<h4 id="4-Maven"><a href="#4-Maven" class="headerlink" title="4.Maven"></a>4.Maven</h4><p>jar 包管理工具。</p>
<h4 id="5-vue"><a href="#5-vue" class="headerlink" title="5.vue"></a>5.vue</h4><p>前端框架，<a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">这是官网</a>。</p>
<h4 id="6-npm"><a href="#6-npm" class="headerlink" title="6.npm"></a>6.npm</h4><p><br></p>
<h2 id="后端项目构建"><a href="#后端项目构建" class="headerlink" title="后端项目构建"></a>后端项目构建</h2><h4 id="1-项目结构"><a href="#1-项目结构" class="headerlink" title="1.项目结构"></a>1.项目结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── avatorImages // 用户头像</span><br><span class="line">├── img</span><br><span class="line">│   ├── singerPic // 歌手图片</span><br><span class="line">│   ├── songListPic // 歌单图片</span><br><span class="line">│   └── songPic // 歌曲图片</span><br><span class="line">├── song // 存放歌曲</span><br><span class="line">├── src</span><br><span class="line">│		├── main</span><br><span class="line">│   │   ├── java</span><br><span class="line">│   │   │   └── com.example.demo</span><br><span class="line">│   │   │       ├── config // 配置（跨域）</span><br><span class="line">│   │   │       ├── controller // 控制器，设置路由，接收请求</span><br><span class="line">│   │   │       ├── dao // mapper接口</span><br><span class="line">│   │   │       ├── domain // 实体类</span><br><span class="line">│   │   │       ├── service</span><br><span class="line">│   │   │       │   └── impl // 实现service层的接口，处理dao返回的数据交给controller层</span><br><span class="line">│   │   │       └── HwMusicApplicationTests.java // 项目入口</span><br><span class="line">│   │   └── resources</span><br><span class="line">│   │       ├── mapper // mapper.xml文件，操作数据库</span><br><span class="line">│   │       ├── static // 存放静态资源</span><br><span class="line">│   │       ├── templates</span><br><span class="line">│   │       ├── application.properties // 连接数据库</span><br><span class="line">│   │       └── generatorConfig.xml // MyBatis Generator 自动生成代码</span><br><span class="line">│   └── test</span><br><span class="line">│       └── java</span><br><span class="line">│           └── com.example.demo // 测试用的</span><br><span class="line">├── pom.xml // 添加相关依赖和插件</span><br><span class="line">└── target</span><br></pre></td></tr></table></figure>
<h4 id="2-创建数据库及需要的表"><a href="#2-创建数据库及需要的表" class="headerlink" title="2..创建数据库及需要的表"></a>2..创建数据库及需要的表</h4><h4 id="3-项目配置"><a href="#3-项目配置" class="headerlink" title="3.项目配置"></a>3.项目配置</h4><p>在new一个新项目的时候，选择 Spring Initializr，在选择项目依赖的时候勾选 <strong>web</strong>下的 Spring Web Starter 和 <strong>SQL</strong>下的 MySQL Driver 和 MyBatis Framework然后继续，给项目命名然后就建成功了。之后会提示导入 Maven然后导入，接下来就是配置文件了。配置的文件有下面3个</p>
<h5 id="1）application-properties-文件"><a href="#1）application-properties-文件" class="headerlink" title="1）application.properties 文件"></a>1）application.properties 文件</h5><p>用于数据库连接</p>
<h5 id="2）generatorConfig-xml-文件"><a href="#2）generatorConfig-xml-文件" class="headerlink" title="2）generatorConfig.xml 文件"></a>2）generatorConfig.xml 文件</h5><p>利用<a href="https://mapperhelper.github.io/docs/3.usembg/" target="_blank" rel="noopener">MyBatis Generator</a> 自动生成代码，生成实体类，Mapper接口和Mapper.xml文件，需要指定<code>mysql-connector-java</code>和生成文件的路径。这个文件自己手动添加，和上一个文件同一目录</p>
<h5 id="3）pom-xml-文件"><a href="#3）pom-xml-文件" class="headerlink" title="3）pom.xml 文件"></a>3）pom.xml 文件</h5><p>添加相关依赖和插件的配置，包括上面的 MyBatis Generator</p>
<table>
<thead>
<tr>
<th>package</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mybatis-spring-boot-starter</td>
<td>MyBatis核心for Spring Boot</td>
</tr>
<tr>
<td>mysql-connector-java</td>
<td>java与mysql连接的jar包驱动程序</td>
</tr>
</tbody>
</table>
<p>在 pom.xml 这一级目录的命令行窗口执行<code>./mvnw mybatis-generator:generate</code>自动生成代码。生成实体类，Mapper 接口和 Mapper.xml 文件。调换一下mapper 和 dao 文件夹中文件的位置，并将 mapper 文件夹放到 resources 目录下。生成后 generatorConfig.xml 文件就可以删掉了，因为这个文件就是初始时候自动生成文件用的，如果不删除每次运行都会再生成一次会覆盖之前的文件，具体生成的这些文件是做什么的我下面会说。</p>
<h4 id="4-开始"><a href="#4-开始" class="headerlink" title="4.开始"></a>4.开始</h4><p>关于项目的构建我将根据dao、domain、server、controller这几层主要实现的功能和它们之间的联系进行介绍。</p>
<h5 id="1）实体类（domain-文件夹下）"><a href="#1）实体类（domain-文件夹下）" class="headerlink" title="1）实体类（domain 文件夹下）"></a>1）实体类（domain 文件夹下）</h5><p>定义数据库表所对应的实体类。</p>
<h5 id="2）Mapper-接口（dao-文件夹下）"><a href="#2）Mapper-接口（dao-文件夹下）" class="headerlink" title="2）Mapper 接口（dao 文件夹下）"></a>2）Mapper 接口（dao 文件夹下）</h5><p>Service 层调用这里的方法去操作数据库。</p>
<h5 id="3）Mapper-xml-文件（mapper-文件夹下）"><a href="#3）Mapper-xml-文件（mapper-文件夹下）" class="headerlink" title="3）Mapper.xml 文件（mapper 文件夹下）"></a>3）Mapper.xml 文件（mapper 文件夹下）</h5><p>上面说到 Service 层调用 Mapper 接口里的方法去操作数据库，但是函数是不能直接去进行 CURD 的， 它是将自己映射成 Mapper.xml 文件，让它去操作数据表的，这样我们就不用去操心烦杂的 SQL 语句了。</p>
<h5 id="4）Service（service-文件夹下）"><a href="#4）Service（service-文件夹下）" class="headerlink" title="4）Service（service 文件夹下）"></a>4）Service（service 文件夹下）</h5><p>service层用来处理 Controller 层处理数据时具体要做的逻辑实现，它的实现是利用 Mapper接口去映射的Mapper.xml文件去操作数据库，将操作后的结果返回回来进行处理，处理完成后再将它处理的结果返回给Controller 层。</p>
<p>封装service层的业务逻辑有利于通用的业务逻辑的独立性和重复利用性 。</p>
<h5 id="5）Controller（controller-文件夹下）"><a href="#5）Controller（controller-文件夹下）" class="headerlink" title="5）Controller（controller 文件夹下）"></a>5）Controller（controller 文件夹下）</h5><p>控制器用来设定路由，接收前端发来的请求并进行业务逻辑处理，当要处理数据库里的数据的时候调用Service层去处理，处理完成后给前端发一个响应。</p>
<h5 id="6）Test"><a href="#6）Test" class="headerlink" title="6）Test"></a>6）Test</h5><p>到了这里可以简单做一下测试，简单的编个接口，在  *ApplicationTests 文件里写添加一个类（给表里写数据）的并运行，然后浏览器窗口里访问一下或者用 Postman 访问，然后看数据是否成功显示，成功说明之前的逻辑是跑的通的。（对于跨域可以在 config 文件夹下面设置）</p>
<p>当前端要访问数据的时候后端就提供相应接口，接口的编写主要就是 Controller 层要设定路由接收请求， 数据的处理交给 Service 层，而 Service 层再去调用 Mapper 接口里的方法，Mapper 接口再去调用 Mapper.xml 文件去操作数据库，操作完成后数据再一层层往上走，最后返回给前端。</p>
<p><br></p>
<h2 id="客户端项目构建"><a href="#客户端项目构建" class="headerlink" title="客户端项目构建"></a>客户端项目构建</h2><h4 id="1-项目结构-1"><a href="#1-项目结构-1" class="headerlink" title="1.项目结构"></a>1.项目结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── build // webpack相关配置文件</span><br><span class="line">├── config // vue基本配置文件</span><br><span class="line">├── dist // 打包文件</span><br><span class="line">├── node_modules // 包</span><br><span class="line">├── src // 项目源码目录</span><br><span class="line">│   ├── assets  // 静态资源，图片、js、css 等</span><br><span class="line">│   ├── components</span><br><span class="line">│   │   ├── AlbumContent.vue // 展示歌单歌手包含的歌曲</span><br><span class="line">│   │   ├── Comment.vue // 评论</span><br><span class="line">│   │   ├── ContentList.vue // 展示歌单歌手区</span><br><span class="line">│   │   ├── LoginLogo.vue // 登录界面的logo</span><br><span class="line">│   │   ├── PlayBar.vue // 页面底部的播放控制区</span><br><span class="line">│   │   ├── ScrollTop.vue // 回到顶部</span><br><span class="line">│   │   ├── SongAudio.vue // 接收音乐并播放的位置</span><br><span class="line">│   │   ├── Swiper.vue // 轮播图</span><br><span class="line">│   │   ├── TheFooter.vue // 页脚</span><br><span class="line">│   │   ├── TheHeader.vue // 页头</span><br><span class="line">│   │   ├── search // 搜索区</span><br><span class="line">│   │   │   ├── SearchSongLists.vue // 按歌单搜索</span><br><span class="line">│   │   │   └── SearchSongs.vue // 按歌手搜索</span><br><span class="line">│   │   ├── mixins</span><br><span class="line">│   │   │   └── index.js // 公共方法</span><br><span class="line">│   │   ├── router</span><br><span class="line">│   │   │   └── index.js // 路由</span><br><span class="line">│   │   ├── store</span><br><span class="line">│   │   │   └── index.js // 管理数据</span><br><span class="line">│   ├── views // 组件</span><br><span class="line">│   │   ├── 404.vue // 404</span><br><span class="line">│   │   ├── HomePage.vue // 首页</span><br><span class="line">│   │   ├── LoginPage.vue // 登录区</span><br><span class="line">│   │   ├── MySongPage.vue // 我的收藏区</span><br><span class="line">│   │   ├── PersonalInfoPage.vue // 个人信息区</span><br><span class="line">│   │   ├── PlayerPage.vue // 歌词显示区</span><br><span class="line">│   │   ├── RegisterPage.vue // 注册区</span><br><span class="line">│   │   ├── SearchPage.vue // 搜索区</span><br><span class="line">│   │   ├── SingerAlbumPage.vue // 歌手详情</span><br><span class="line">│   │  	├── SingerPage.vue // 歌手区</span><br><span class="line">│   │   ├── SongListAlbumPage.vue // 歌单详情</span><br><span class="line">│   │   ├── SongListPage.vue // 歌单区</span><br><span class="line">│   │   └── UploadPage.vue // 修改头像</span><br><span class="line">│   ├── main.js // 入口js文件</span><br><span class="line">│   └── app.vue // 根组件</span><br><span class="line">├── static // 存放静态资源 </span><br><span class="line">├── test // 测试文件目录</span><br><span class="line">├── index.html // 入口页面</span><br><span class="line">├── .babelrc // bable 编译配置</span><br><span class="line">├── .gitignore // 提交忽略的文件配置</span><br><span class="line">└── package.json // 管理包的依赖</span><br></pre></td></tr></table></figure>
<h4 id="2-开发思路"><a href="#2-开发思路" class="headerlink" title="2.开发思路"></a>2.开发思路</h4><p>先用<code>vue init webpack music-client</code>构建一个vue项目，在 views 文件夹中写一个页面的组件，因为代码都放在一起对后期维护和修改都不方便，所以把他们根据功能或者位置拆分开，放到 components 文件夹下面去实现，最后再整合到 views 文件夹下。加载到 App.vue 文件中，最后渲染到页面中。</p>
<p>最开始构建页面可以写死，当基本样子搭起来之后就可以去向后端去请求数据，请求数据用到的是<code>axios</code>插件，获取到数据后console一下，在控制台查看请求的数据，确保数据保存到正确的变量中去（这里如果遇到跨域的问题可以在后端用 CORS 解决）。</p>
<p>组件的问题解决了接下来就是访问的问题，我们如何通过点击的时候切换组件呢？我们在 router 文件夹中引入组件，给它们设定访问它们的路径。这里用到了<code>vue-router</code>插件。</p>
<p>随着组件的增多，组件之间的传值就是问题，不可能一些数据一直好几个组件里一直传，我们需要把它们单独拿出来放到 store 文件夹下面保存起来，当需要的时候在获取（这里通过 sessionStorage 解决vuex刷新数据丢失问题）。这里用到了<code>vuex</code>组件。</p>
<p>不同的组件有时候会用到相同的方法，当要修改方法时就要改好多地方，所以把它们单独拿出来放到mixins文件夹下面，当用到这些方法的时候在对应组件中引入即可。</p>
<p>vue支持很多的第三方组件，能给我们项目带来很好的交互和显示效果，具体在需要的时候npm或yarn就行了，当然了，一些样式和js语句也可以放到assets文件夹下。</p>
<p><br></p>
<h2 id="管理端项目构建"><a href="#管理端项目构建" class="headerlink" title="管理端项目构建"></a>管理端项目构建</h2><p>同上</p>
<p><br></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>希望我的描述能给大家带来帮助，如果有不足或疑问欢迎交流。以前一直学习前端，没接触过后端，经常会调用别人写好的接口，但是一直都很好奇这些 json 文件怎么来的，这些访问的路径后端是怎么设定的，终于利用这次机会明白了，并且真的学到了很多东西。</p>
<p>最后再放上我项目的<a href="https://github.com/Yin-Hongwei/music-website" target="_blank" rel="noopener">地址</a>，嘻嘻😁。</p>
<div class="qr-code"></div><img class="qrcode-img" src="/img/weixin.jpg"><div class="qrcode-desc">微信打赏</div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/vue/">vue</a><a class="post-tags" href="/tags/spring-boot/">spring boot</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/08/01/koa入门/"><i class="fa fa-chevron-left"></i><span>koa 入门</span></a></div><div class="next-post pull-right"><a href="/2018/12/06/vue数据获取/"><span>vue 中有关数据获取问题</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'e238e2d1f25ec6e15026',
  clientSecret: '3c4e537d46a59d056e6c0cc478b04784defafcfb',
  repo: 'Yin-Hongwei.github.io',
  owner: 'Yin-Hongwei',
  admin: 'Yin-Hongwei',
  id: md5(window.location.pathname)
})
gitalk.render('gitalk-container')</script></article></section></article><footer id="footer-outer"><div id="footer-inner"><p class="footer-text">Copyright &copy; 2018-2019</p><p class="footer-text">Designed by Yin-Hongwei</p></div></footer></body><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/main.js" defer></script></html>