<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="vue仿知乎日志WebApp"><meta name="keywords" content="vue"><meta name="author" content="Yin-Hongwei"><meta name="copyright" content="Yin-Hongwei"><title>vue仿知乎日志WebApp | Hongwei Blog</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script></head><body><header id="header"><nav id="navbar"><span class="nav-left"><div class="tou-img"><img src="/img/tou.jpg"></div><a id="site-name" href="/">Hongwei Blog</a></span><i class="fa fa-bars toggle-menu nav-right" aria-hidden="true"></i><span class="nav-right menus"><a class="site-page" href="/about">关于</a><a class="site-page" href="/archives">存档</a><a class="site-page" href="/tags">标签</a></span></nav></header><article id="content-outer"><section id="content-inner"><article class="article-entry" id="post"><h1>vue仿知乎日志WebApp</h1><p>学了一段时间前端，最近做了一个知乎日志，收获很多。然后记录下自己的心得。</p>
<a id="more"></a>
<h2 id="项目API地址"><a href="#项目API地址" class="headerlink" title="项目API地址"></a><a href="https://github.com/izzyleung/ZhihuDailyPurify/wiki/%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5-API-%E5%88%86%E6%9E%90" target="_blank" rel="noopener">项目API地址</a></h2><h2 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a><a href="https://github.com/Yin-Hongwei/vue-zhihu" target="_blank" rel="noopener">项目地址</a></h2><h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><p><img src="/img/zhihu1.jpg" width="300px"><br><img src="/img/zhihu2.jpg" width="300px"><br><img src="/img/zhihu3.jpg" width="300px"><br><img src="/img/zhihu4.jpg" width="300px"><br><img src="/img/zhihu5.jpg" width="300px"></p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p> 首页</p>
<p> 轮播图</p>
<p> 动态消息</p>
<p> 下拉刷新</p>
<p> 动态消息详情页</p>
<p> 侧边栏</p>
<p> 侧边栏主题页</p>
<p> 主题列表详情</p>
<p> 一些小的交互效果</p>
<h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><pre><code>vue + vue-router + vuex + axios + mint-ui + muse-ui + element-ui
</code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1）首先在制作的时候不要想着一开始就把某部分做的很完美，比如把什么标题栏做的非常好看了在继续做，因为谁也不能说一开始你想的就是多的，在后续制作过程中可能你就有了更好的灵感，最重要的是东西堆积的多了会给修改等方面带来问题，所以就和画画一样先找大的关系，大的框架，要做某一页，先把这一页划分块，然后在在那些块中去处理。</p>
<p>2）制作遇到的第一个问题是跨域问题，总结了几种解决的方案。详细请看axios跨域问题。</p>
<p>3）数据拉取了有个地方比较坑，就是图片显示不了，原因就是为了防盗。知乎API返回的数据中的图片都是存储在知乎服务器上的url地址，直接请求会返回403，所以需要进行一些处理，使用Images.weserv.nl进行缓存图片，并在需要使用图片url的地方进行相应的替换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">attachImageUrl: function (srcUrl) &#123;</span><br><span class="line">  if (srcUrl !== undefined) &#123;</span><br><span class="line">    return srcUrl.replace(/http\w&#123;0,1&#125;:\/\/p/g, &apos;https://images.weserv.nl/?url=p&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">attachBodyContent: function (body) &#123;</span><br><span class="line">  if (body !== undefined) &#123;</span><br><span class="line">    return body.replace(/src=&quot;http\w&#123;0,1&#125;:\/\//g, &apos;src=&quot;https://images.weserv.nl/?url=&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>有些数据是直接拉的body，第二个是替换body中的图片的url</p>
<p>4）还有一个就是有些页面拉取数据时候把css样式也拉取来，拉来之后在退出当前页面的时候要记得删除那个样式，不然等你去浏览其他页的时候会发现原来的结构变了，刷新一下又好了，那就是那个样式在作怪。</p>
<p>5）此外要掌握一些组件，比如 mint-ui ， muse-ui ， element-ui等，这些东西很出效果，代码量小，很大的提高了开发效率看上去很多，但是知道了一个的原理，其他的看一眼就会了。</p>
<div class="qr-code"></div><img class="qrcode-img" src="/img/weixin.jpg"><div class="qrcode-desc">微信打赏</div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/vue/">vue</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/06/01/vue生命周期/"><i class="fa fa-chevron-left"></i><span>vue生命周期</span></a></div><div class="next-post pull-right"><a href="/2018/04/02/设计/"><span>设计</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'e238e2d1f25ec6e15026',
  clientSecret: '3c4e537d46a59d056e6c0cc478b04784defafcfb',
  repo: 'Yin-Hongwei.github.io',
  owner: 'Yin-Hongwei',
  admin: 'Yin-Hongwei',
  id: md5(window.location.pathname)
})
gitalk.render('gitalk-container')</script></article></section></article><footer id="footer-outer"><div id="footer-inner"><p class="footer-text">Copyright &copy; 2018-2019</p><p class="footer-text">Designed by Yin-Hongwei</p></div></footer></body><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/main.js" defer></script></html>