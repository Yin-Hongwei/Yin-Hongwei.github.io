<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="JavaScript 之 Event Loop"><meta name="keywords" content="JavaScript"><meta name="author" content="Yin-Hongwei"><meta name="copyright" content="Yin-Hongwei"><title>JavaScript 之 Event Loop | Hongwei Blog</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script></head><body><header id="page-header"><nav id="navbar"><span class="nav-left"><div class="tou-img"><img src="/img/tou.jpg"></div><a id="site-name" href="/">Hongwei Blog</a></span><i class="fa fa-bars toggle-menu nav-right" aria-hidden="true"></i><span class="nav-right menus"><a class="site-page" href="/about">关于</a><a class="site-page" href="/archives">存档</a><a class="site-page" href="/tags">标签</a></span></nav></header><article id="content-outer"><section id="content-inner"><article class="article-entry" id="post"><h1>JavaScript 之 Event Loop</h1><p>javascript 是单线程，非阻塞，异步，解释性的脚本语言。（JavaScript假如是多线程，那么当一个线程让个东西变蓝，一个让变红，浏览器就不知道该变成啥了，所以只能是单线程）<br><a id="more"></a></p>
<h2 id="一-同步"><a href="#一-同步" class="headerlink" title="一 同步"></a>一 同步</h2><h4 id="1-概念："><a href="#1-概念：" class="headerlink" title="1.概念："></a>1.概念：</h4><p>1）以chrome中js的运行环境V8引擎为例，其运行环境有一个调用栈和堆。且其运行环境有且只有一个调用栈，每次只能做一件事情。堆里记录内存分配消息。<br>2）调用栈（call stack）：是一个记录当前程序所在位置的数据结构，如果当前进入了某个函数，这个函数会被放在栈里面，如果当前离开某个函数，这个函数就会被弹出栈外。 即利用这个栈的特殊结构实现同步。</p>
<h4 id="2-描述："><a href="#2-描述：" class="headerlink" title="2.描述："></a>2.描述：</h4><p>当执行一个js文件时，先预编译，然后开始执行，计算机一行一行的扫描，变量该赋值的赋值，该覆盖的覆盖，当执行到函数的时候，假设 A 调用 B，B 再调用 C，那么思路是C 执行完把值返回给 B，B 再执行完把值返回给 A。在计算机中这个过程是先把A压入调用栈，再把B压入调用栈，再把C压入调用栈，C运行完后就C就出栈，然后执行B，B运行完后B出栈，然后执行A，A运行完后A出栈。在这个过程中在执行C的时候，B和A不能执行，只有当C执行完后B才能执行，A要等B执行完才能执行，这样一个完了才能另一个执行。</p>
<h2 id="二-异步"><a href="#二-异步" class="headerlink" title="二 异步"></a>二 异步</h2><h4 id="1-概念：-1"><a href="#1-概念：-1" class="headerlink" title="1.概念："></a>1.概念：</h4><p>1）阻塞：请求一个资源，得当前事情做完才会去处理这个请求。<br>     非阻塞：提供异步回调，利用回调函数来实现异步。<br>2）WEBAPIS（浏览器提供的API）包括DOM，AJAX，他们不在V8引擎里。是js运行时得到的而外的东西<br>3）定时器：指定某些代码在多少时间之后执行。<br>4）回调队列（callback queue）<br>5）事件循环（Event Loop）：一种运行机制，即调用栈向调用队列里读取事件，这个过程是循环不断的。<br><img src="https://tva1.sinaimg.cn/large/00831rSTly1gda364gew8j30gp0endgm.jpg" width="400"></p>
<h4 id="2-描述：-1"><a href="#2-描述：-1" class="headerlink" title="2.描述："></a>2.描述：</h4><p>同上，当执行到函数的时候，将函数压入调用栈，假如要调用浏览器的API，那么js引擎不会去管，因为那不是js引擎里的东西，所以浏览器继续向下执行，函数执行完就出栈，如果那个函数就是浏览器的API，出栈，而那个浏览器API会在回调队列里加入相应事件，当调用栈里的东西运行完清空后，会发生事件循环，即去读取回调队列，将那些事件相对应的回调函数压入调用栈去执行。</p>
<hr>
<p>😄😄😄以上为个人对事件循环（Event Loop）大致逻辑关系的理解。</p>
<div class="qr-code"></div><img class="qrcode-img" src="/img/weixin.jpg"><div class="qrcode-desc">微信打赏</div><div class="post-tag-list">标签: <a class="post-tags" href="/tags/JavaScript/">JavaScript</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/10/15/正则表达式/"><i class="fa fa-chevron-left"></i><span>正则表达式</span></a></div><div class="next-post pull-right"><a href="/2018/08/01/vue响应式原理/"><span>Vue 双向数据绑定</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'e238e2d1f25ec6e15026',
  clientSecret: '3c4e537d46a59d056e6c0cc478b04784defafcfb',
  repo: 'Yin-Hongwei.github.io',
  owner: 'Yin-Hongwei',
  admin: 'Yin-Hongwei',
  id: md5(window.location.pathname)
})
gitalk.render('gitalk-container')</script></article></section></article><footer id="footer-outer"><div id="footer-inner"><p class="footer-text">Copyright &copy; 2018-2020</p><p class="footer-text">Designed by Yin-Hongwei</p></div></footer></body><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/main.js" defer></script><script src="/js/scroll.js" defer></script></html>